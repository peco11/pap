<h1 class="pap-form-recap-title">
  {{ 'Riepilogo' | translate }}
</h1>
<ng-container *ngFor="let item of steps$ | async">
  <ng-container *ngIf="form.controls[item.type].value as value">
    <!-- Trash type -->
    <ion-item *ngIf="value.tbType">
      <ion-grid>
        <ion-row>
          <ion-col
            size-sm="4"
            size-xs="12">
            <ion-label class="pap-form-recap-label ion-text-wrap">Tipo di rifiuto:</ion-label>
          </ion-col>
          <ion-col
            size-sm="8"
            size-xs="12">
            <ion-badge
              class="ion-text-wrap"
              [style.background-color]="value.tbType.color"
              >{{ value.tbType.name.it }}</ion-badge
            >
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <!-- Date -->
    <ion-item *ngIf="value.trashDate">
      <ion-grid>
        <ion-row>
          <ion-col
            size-sm="4"
            size-xs="12">
            <ion-label class="pap-form-recap-label ion-text-wrap">Data:</ion-label>
          </ion-col>
          <ion-col
            size-sm="8"
            size-xs="12">
            <ion-label class="ion-text-wrap">{{ value.trashDate | date }}</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <!-- Address -->
    <ion-item *ngIf="value.calendar">
      <ion-grid>
        <ion-row>
          <ion-col
            size-sm="4"
            size-xs="12">
            <ion-label class="pap-form-recap-label ion-text-wrap">Indirizzo:</ion-label>
          </ion-col>
          <ion-col
            size-sm="8"
            size-xs="12">
            <ion-label class="ion-text-wrap">{{ value.calendar.address.address }}</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ng-container>
</ng-container>

<ng-container *ngFor="let item of steps$ | async">
  <ion-item *ngIf="form.controls[item.type].value != null && form.controls[item.type].value != ''">
    <ion-grid class="pap-form-recap-list">
      <ion-row>
        <ion-col
          size-sm="4"
          size-xs="12">
          <ion-label class="pap-form-recap-label ion-text-wrap"
            >{{(item.recap || '')|translate}}:</ion-label
          >
        </ion-col>
        <ion-col
          size-sm="8"
          size-xs="12">
          <ng-container [ngSwitch]="item.type">
            <ion-label *ngSwitchCase="'text'">{{ form.controls[item.type].value }}</ion-label>
            <ion-badge
              *ngSwitchCase="'trash_type_id'"
              [style.background-color]="(currentTrashBookType$ | async)?.color"
              >{{ (currentTrashBookType$ | async)?.name }}</ion-badge
            >
            <ng-container *ngSwitchCase="'location'">
              <ion-label *ngIf="form.controls['city'].value as city">{{ city }}</ion-label>
              <ion-label *ngIf="form.controls['address'].value as address">{{ address }}</ion-label>
              <ion-label
                *ngIf="form.controls['house_number'].value as house_number"
                >{{ house_number }}</ion-label
              >
            </ng-container>
            <ion-label *ngSwitchCase="'phone'">{{ form.controls[item.type].value }}</ion-label>
            <ion-label *ngSwitchCase="'note'">{{ form.controls[item.type].value }}</ion-label>
            <ng-container *ngSwitchCase="'image'">
              <img [src]="form.controls[item.type].value" />
            </ng-container>
            <ion-label *ngSwitchDefault>{{ 'messages.notInserted' | translate }}</ion-label>
          </ng-container>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
</ng-container>
